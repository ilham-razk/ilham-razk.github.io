<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>For My Love ‚ù§Ô∏è</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>‚ù§Ô∏è</text></svg>">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom right, #ffe4e1, #ffccd5);
            color: #4a1c1c;
            font-family: 'Segoe UI', sans-serif;
            overflow-y: auto;
            height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .photo {
            width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            margin-bottom: 30px;
        }

        .message {
            opacity: 0;
            font-size: 1.8rem;
            margin-bottom: 30px;
            text-align: center;
            transition: opacity 1s ease;
        }

        .show {
            opacity: 1;
        }

        .music-button {
            background: white;
            color: black;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-top: 10px;
        }

        .music-button:hover {
            background: #ddd;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
        }

        .modal-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 20px;
            border-radius: 15px;
            width: 80%;
            max-width: 800px;
            color: #333;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .day-label {
            background-color: #2196F3;
            color: white;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }

        th {
            background-color: #4CAF50;
            color: white;
        }

        #calendar table {
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        #calendar th, #calendar td {
            border: 1px solid #ccc;
            padding: 5px;
            text-align: center;
        }

        #calendar .today {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }

        #calendar .highlight {
            background-color: #f06292;
            color: white;
            font-weight: bold;
        }

        .video-section {
            width: 100%;
            max-width: 720px;
            margin-top: 30px;
        }

        .carousel-wrapper {
            position: relative;
            max-width: 500px; /* Ukuran lebih kecil */
            margin: 0 auto 30px auto;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        }

        .carousel {
            position: relative;
            width: 100%;
            height: auto;
        }

        .carousel-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            border-radius: 20px;
        }

        .carousel-image.active {
            opacity: 1;
            position: relative;
            z-index: 1;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255,255,255,0.7);
            border: none;
            font-size: 2rem;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 10px;
            z-index: 2;
        }

        .carousel-btn.left {
            left: 10px;
        }

        .carousel-btn.right {
            right: 10px;
        }

        .carousel-btn:hover {
            background-color: rgba(255,255,255,0.9);
        }

        .carousel-wrapper {
            max-width: 500px;
            margin: 20px auto;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }

        .carousel-video {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="carousel-wrapper">
        <button class="carousel-btn left" onclick="prevImage()">&#10094;</button>

        <div class="carousel" id="carousel">
            <img class="carousel-image" src="image/bagel-coffee.jpeg" alt="Foto 1" />
            <img class="carousel-image" src="image/photo-2.jpeg" alt="Foto 2" />
            <img class="carousel-image" src="image/photo-3.jpeg" alt="Foto 3" />
            <img class="carousel-image" src="image/photo-4.jpeg" alt="Foto 4" />
            <img class="carousel-image" src="image/photo-5.jpeg" alt="Foto 5" />
            <img class="carousel-image" src="image/photo-6.jpeg" alt="Foto 6" />
            <img class="carousel-image" src="image/photo-7.jpeg" alt="Foto 7" />
            <img class="carousel-image" src="image/photo-8.jpeg" alt="Foto 8" />
            <img class="carousel-image" src="image/photo-9.jpeg" alt="Foto 9" />
            <img class="carousel-image" src="image/photo-10.jpeg" alt="Foto 10" />
        </div>

        <button class="carousel-btn right" onclick="nextImage()">&#10095;</button>
    </div>

    <div class="message" id="message1">Good Night Melisa Jane</div>
    <div class="message" id="message2">Happy A Nice Dream Sengku!!!</div>
    <div class="message" id="message3">I Love u soooooo muchhh</div>
    <div class="message" id="message4">God Bless You Sayangkuu ‚ù§Ô∏è</div>

    <button class="music-button" onclick="document.getElementById('bgMusic').play()">Play Music üéµ</button>
    <button class="music-button" onclick="stopMusic()">Stop Music üîá</button>
    <button class="music-button" onclick="showRundown()">Lihat Rundown üìã</button>
    <button class="music-button" onclick="logout()">Logout üîì</button>

    <!-- Video -->
    <div class="video-section">
        <h3 style="text-align:center; margin-top: 40px;">üíó Our Memory üíó</h3>

        <div class="carousel-wrapper">
            <video controls class="carousel-video">
                <source src="video/love-video.mp4" type="video/mp4">
                Browser kamu tidak mendukung video.
            </video>
        </div>
    </div>

    <div id="countdown" style="margin-top: 30px; text-align: center; font-size: 1.5rem;"></div>
    <div id="calendar" style="margin-top: 20px;"></div>
</div>

<audio id="bgMusic" autoplay loop>
    <source src="apt-bruno-mars.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
</audio>

<!-- Modal Rundown -->
<div id="rundownModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="hideRundown()">&times;</span>
        <h2>Rundown Bandung</h2>
        <table>
            <tr><th>Hari</th><th>Jam</th><th>Lokasi</th></tr>
            <tr><td class="day-label" rowspan="6">Day 1</td><td>09:00</td><td>Mega Bekasi</td></tr>
            <tr><td>11:00</td><td>Bandung</td></tr>
            <tr><td>12:00</td><td>Kilogram</td></tr>
            <tr><td>15:00</td><td>Kusuma Matcha</td></tr>
            <tr><td>16:00</td><td>Check in</td></tr>
            <tr><td>18:00</td><td>Sudiran Street</td></tr>
            <tr><td class="day-label" rowspan="6">Day 2</td><td>09:00</td><td>Mandi</td></tr>
            <tr><td>12:00</td><td>Check out</td></tr>
            <tr><td>12:30</td><td>Bebek Borme</td></tr>
            <tr><td>14:30</td><td>Drunk Baker</td></tr>
            <tr><td>16:30</td><td>Zuko</td></tr>
            <tr><td>18:30</td><td>Stasiun Bandung</td></tr>
        </table>
    </div>
</div>

<script>
    const delays = [5000, 6500, 8000, 9500];
    const messages = [
        document.getElementById("message1"),
        document.getElementById("message2"),
        document.getElementById("message3"),
        document.getElementById("message4")
    ];

    messages.forEach((msg, i) => {
        setTimeout(() => {
            msg.classList.add("show");
        }, delays[i]);
    });

    // Idle logout setup
    const maxIdleTime = 5 * 60 * 1000; // 5 menit
    let idleTimer;

    function resetIdleTimer() {
        clearTimeout(idleTimer);
        idleTimer = setTimeout(() => {
            alert("Kamu sudah tidak aktif selama 5 menit, otomatis logout.");
            logout();
        }, maxIdleTime);
    }

    window.addEventListener("load", () => {
        if(localStorage.getItem("isLoggedIn") !== "true"){
            window.location.href = "index.html";
            return;
        }

        const shouldPlay = localStorage.getItem("playMusic");
        if (shouldPlay === "yes") {
            const music = document.getElementById("bgMusic");
            music.play().catch(e => {
                console.warn("Autoplay gagal, harus interaksi dulu:", e);
            });
            localStorage.removeItem("playMusic");
        }

        // Start idle timer & listen aktivitas user
        resetIdleTimer();
        window.addEventListener("mousemove", resetIdleTimer);
        window.addEventListener("keydown", resetIdleTimer);
        window.addEventListener("scroll", resetIdleTimer);
        window.addEventListener("click", resetIdleTimer);
    });

    function showRundown() {
        document.getElementById('rundownModal').style.display = 'block';
    }

    function hideRundown() {
        document.getElementById('rundownModal').style.display = 'none';
    }

    function logout() {
        localStorage.removeItem("isLoggedIn");
        localStorage.removeItem("playMusic");
        window.location.href = "index.html";
    }

    // Countdown logic
    function updateCountdown() {
        const targetDate = new Date("2025-06-13T09:00:00");
        const now = new Date();
        const diff = targetDate - now;

        if (diff <= 0) {
            document.getElementById("countdown").innerText = "It's time! üíï";
            return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hrs = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const mins = Math.floor((diff / (1000 * 60)) % 60);
        const secs = Math.floor((diff / 1000) % 60);

        document.getElementById("countdown").innerText =
            `Countdown to 13 Juni 2025 09:00 üëâ ${days}d ${hrs}h ${mins}m ${secs}s`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // Calendar logic
    function renderCalendar() {
        const targetDay = 13;
        const targetMonth = 5; // Juni (0-based, so 5 = June)
        const targetYear = 2025;

        const now = new Date();
        const month = now.getMonth();
        const year = now.getFullYear();

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        let table = '<table><tr>';
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => table += `<th>${day}</th>`);
        table += '</tr><tr>';

        for (let i = 0; i < firstDay; i++) table += '<td></td>';

        for (let d = 1; d <= daysInMonth; d++) {
            const currentDate = new Date(year, month, d);
            let className = '';

            if (d === now.getDate() && month === now.getMonth() && year === now.getFullYear()) {
                className = 'today';
            } else if (d === targetDay && month === targetMonth && year === targetYear) {
                className = 'highlight';
            }

            table += `<td class="${className}">${d}</td>`;

            if ((firstDay + d) % 7 === 0) table += '</tr><tr>';
        }

        table += '</tr></table>';
        document.getElementById("calendar").innerHTML = `<h3>Kalender ${now.toLocaleString('default', { month: 'long' })} ${year}</h3>` + table;
    }
    renderCalendar();

    function stopMusic() {
        const music = document.getElementById("bgMusic");
        music.pause();
        music.currentTime = 0; // mulai dari awal kalau nanti diputar lagi
    }

    let currentIndex = 0;
    const images = document.querySelectorAll(".carousel-image");
    let carouselTimer;

    function showImage(index) {
        images.forEach((img, i) => {
            img.classList.remove("active");
            if (i === index) img.classList.add("active");
        });
    }

    function nextImage() {
        currentIndex = (currentIndex + 1) % images.length;
        showImage(currentIndex);
        resetCarouselTimer();
    }

    function prevImage() {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        showImage(currentIndex);
        resetCarouselTimer();
    }

    function resetCarouselTimer() {
        clearInterval(carouselTimer);
        carouselTimer = setInterval(nextImage, 5000); // 5 detik
    }

    // Inisialisasi
    if (images.length > 0) {
        showImage(currentIndex);
        carouselTimer = setInterval(nextImage, 5000);
    }
</script>
</body>
</html>
